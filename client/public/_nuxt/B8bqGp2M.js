import{_ as T}from"./lNRdsVY4.js";import{f as y,i as C,r as v,o as p,c as h,a as e,b as c,w as d,d as u,m as a,n as A,v as E,B as N,A as V,x as $,E as B,z as g}from"./DYllrXfV.js";const D={class:"f-col h-100vh"},S={class:"flex"},L={class:"home-links"},U={key:0,class:"flex-1 flex items-center"},K={key:1,class:"flex items-center"},z={class:"px flex-1 box-border"},M=e("footer",{class:"blog-footer frc"}," 2binfront@2024 ",-1),F=y({__name:"default",setup(R){const o=C();let m=null,b=200,k=new Date().getTime(),f=0;const n=v(!1),w=()=>{f=new Date().getTime()-k<b?f+1:1,k=new Date().getTime(),clearTimeout(m),m=setTimeout(()=>{clearTimeout(m),f>3&&(n.value=!n.value)},b+10)},i=v(""),x=async()=>{try{const s=await $fetch("/api/blog/auth/login",{method:"post",body:{username:o.username,password:i.value}});o.access_token=s.access_token,await o.checkAuth()}catch{}},_=s=>{switch(s){case"addArticle":g("/article?edit=1");break;case"editC":g("/category?edit=1");break;case"editT":g("/tag?edit=1");break}};return(s,t)=>{const l=T;return p(),h("div",D,[e("header",{class:"blog-header px pt-4 pb-2 frb",onClick:w},[e("div",S,[c(l,{to:"/",class:"text-26px mr my-2"},{default:d(()=>[u("hh's blog")]),_:1}),e("div",L,[c(l,{to:"/category"},{default:d(()=>[u("Category")]),_:1}),c(l,{to:"/tag",ml:""},{default:d(()=>[u("Tag")]),_:1}),c(l,{to:"/about",ml:""},{default:d(()=>[u("About")]),_:1})])]),a(n)&&!a(o).canEdit?(p(),h("div",U,[A(e("input",{class:"ml",type:"password","show-password":"","onUpdate:modelValue":t[0]||(t[0]=r=>N(i)?i.value=r:null),onKeyup:V(x,["enter"])},null,544),[[E,a(i)]])])):a(n)&&a(o).canEdit?(p(),h("div",K,[e("button",{onClick:t[1]||(t[1]=r=>_("addArticle"))},"Add Article"),e("button",{onClick:t[2]||(t[2]=r=>_("editC"))},"Edit Categories"),e("button",{onClick:t[3]||(t[3]=r=>_("editT"))},"Edit Tags")])):$("",!0)]),e("main",z,[B(s.$slots,"default")]),M])}}});export{F as default};
