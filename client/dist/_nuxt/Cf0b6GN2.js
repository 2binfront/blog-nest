import{_ as x}from"./D0wo9lwX.js";import{g as y,j as C,r as v,o as p,c as g,a as e,b as c,w as d,d as u,n as a,q as A,v as E,C as N,B as V,y as $,G as B,A as b}from"./B4nhvq4f.js";const D={class:"f-col h-100vh"},S={class:"flex"},L={class:"home-links"},U={key:0,class:"flex-1 flex items-center"},K={key:1,class:"flex items-center"},j={class:"px flex-1 box-border"},q=e("footer",{class:"blog-footer frc"}," 2binfront@2024 ",-1),z=y({__name:"default",setup(G){const o=C();let m=null,h=200,k=new Date().getTime(),f=0;const n=v(!1),w=()=>{f=new Date().getTime()-k<h?f+1:1,k=new Date().getTime(),clearTimeout(m),m=setTimeout(()=>{clearTimeout(m),f>3&&(n.value=!n.value)},h+10)},i=v(""),T=async()=>{try{const s=await $fetch("/api/blog/auth/login",{method:"post",body:{username:o.username,password:i.value}});o.access_token=s.access_token,await o.checkAuth()}catch{}},_=s=>{switch(s){case"addArticle":b("/article?edit=1");break;case"editC":b("/category?edit=1");break;case"editT":b("/tag?edit=1");break}};return(s,t)=>{const r=x;return p(),g("div",D,[e("header",{class:"blog-header px pt-4 pb-2 frb",onClick:w},[e("div",S,[c(r,{to:"/",class:"text-26px mr my-2"},{default:d(()=>[u("2binfront's blog")]),_:1}),e("div",L,[c(r,{to:"/category"},{default:d(()=>[u("Category")]),_:1}),c(r,{to:"/tag",ml:""},{default:d(()=>[u("Tag")]),_:1}),c(r,{to:"/about",ml:""},{default:d(()=>[u("About")]),_:1})])]),a(n)&&!a(o).canEdit?(p(),g("div",U,[A(e("input",{class:"ml",type:"password","show-password":"","onUpdate:modelValue":t[0]||(t[0]=l=>N(i)?i.value=l:null),onKeyup:V(T,["enter"])},null,544),[[E,a(i)]])])):a(n)&&a(o).canEdit?(p(),g("div",K,[e("button",{onClick:t[1]||(t[1]=l=>_("addArticle"))},"Add Article"),e("button",{onClick:t[2]||(t[2]=l=>_("editC"))},"Edit Categories"),e("button",{onClick:t[3]||(t[3]=l=>_("editT"))},"Edit Tags")])):$("",!0)]),e("main",j,[B(s.$slots,"default")]),q])}}});export{z as default};
